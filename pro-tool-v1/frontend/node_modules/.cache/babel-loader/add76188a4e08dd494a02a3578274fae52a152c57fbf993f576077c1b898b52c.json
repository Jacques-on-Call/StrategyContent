{"ast":null,"code":"import React,{useState,useEffect}from'react';import ServiceBlock from'./components/ServiceBlock';import CostVisualizer from'./components/CostVisualizer';import ImpactVisualizer from'./components/ImpactVisualizer';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[services,setServices]=useState([]);const[proposalServices,setProposalServices]=useState([]);const[totalCost,setTotalCost]=useState(0);const[clientPrice,setClientPrice]=useState(0);const[proposalId,setProposalId]=useState(null);// Assuming we have a proposal ID\nuseEffect(()=>{// Create a new proposal when the app loads\nfetch('https://strategycontent.agency/proposal-tool/api/proposals',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ClientID:1,Status:'Draft'})// Assuming client ID 1 for now\n}).then(res=>res.text()).then(text=>{const id=parseInt(text.split(': ')[1],10);setProposalId(id);});// Fetch services\nfetch('https://strategycontent.agency/proposal-tool/api/services').then(res=>res.json()).then(data=>setServices(data)).catch(err=>console.error(err));},[]);const addServiceToProposal=service=>{// Add the service to the proposal on the backend\nfetch(`/api/proposal_services`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ProposalID:proposalId,ServiceID:service.ServiceID,Quantity:1})}).then(()=>{setProposalServices([...proposalServices,service]);});};const removeServiceFromProposal=serviceToRemove=>{// This is a bit tricky since we don't have the ProposalServiceID.\n// For now, we'll just remove it from the frontend.\n// A better implementation would be to fetch the ProposalServiceID when adding the service.\nsetProposalServices(proposalServices.filter(s=>s.ServiceID!==serviceToRemove.ServiceID));};useEffect(()=>{if(proposalId){// Recalculate cost\nfetch(`/api/proposals/${proposalId}/calculate-cost`).then(res=>res.json()).then(data=>{setTotalCost(data.totalCost);setClientPrice(data.clientPrice);});}},[proposalServices,proposalId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"DigitalView Dynamic Proposal Tool\"})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"services-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Services\"}),services.map(service=>/*#__PURE__*/_jsx(ServiceBlock,{service:service,onAdd:addServiceToProposal},service.ServiceID))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"proposal-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Proposal\"}),/*#__PURE__*/_jsx(\"ul\",{children:proposalServices.map(service=>/*#__PURE__*/_jsxs(\"li\",{children:[service.Name,/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeServiceFromProposal(service),children:\"Remove\"})]},service.ServiceID))}),/*#__PURE__*/_jsx(CostVisualizer,{totalCost:totalCost,clientPrice:clientPrice}),/*#__PURE__*/_jsx(ImpactVisualizer,{})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ServiceBlock","CostVisualizer","ImpactVisualizer","jsx","_jsx","jsxs","_jsxs","App","services","setServices","proposalServices","setProposalServices","totalCost","setTotalCost","clientPrice","setClientPrice","proposalId","setProposalId","fetch","method","headers","body","JSON","stringify","ClientID","Status","then","res","text","id","parseInt","split","json","data","catch","err","console","error","addServiceToProposal","service","ProposalID","ServiceID","Quantity","removeServiceFromProposal","serviceToRemove","filter","s","className","children","map","onAdd","Name","onClick"],"sources":["/workspaces/StrategyContent/proposal-tool/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ServiceBlock from './components/ServiceBlock';\nimport CostVisualizer from './components/CostVisualizer';\nimport ImpactVisualizer from './components/ImpactVisualizer';\nimport './App.css';\n\nfunction App() {\n  const [services, setServices] = useState([]);\n  const [proposalServices, setProposalServices] = useState([]);\n  const [totalCost, setTotalCost] = useState(0);\n  const [clientPrice, setClientPrice] = useState(0);\n  const [proposalId, setProposalId] = useState(null); // Assuming we have a proposal ID\n\n  useEffect(() => {\n    // Create a new proposal when the app loads\n    fetch('https://strategycontent.agency/proposal-tool/api/proposals', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ ClientID: 1, Status: 'Draft' }) // Assuming client ID 1 for now\n    })\n      .then(res => res.text())\n      .then(text => {\n        const id = parseInt(text.split(': ')[1], 10);\n        setProposalId(id);\n      });\n\n    // Fetch services\n    fetch('https://strategycontent.agency/proposal-tool/api/services')\n      .then(res => res.json())\n      .then(data => setServices(data))\n      .catch(err => console.error(err));\n  }, []);\n\n  const addServiceToProposal = (service) => {\n    // Add the service to the proposal on the backend\n    fetch(`/api/proposal_services`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ ProposalID: proposalId, ServiceID: service.ServiceID, Quantity: 1 })\n    }).then(() => {\n      setProposalServices([...proposalServices, service]);\n    });\n  };\n\n  const removeServiceFromProposal = (serviceToRemove) => {\n    // This is a bit tricky since we don't have the ProposalServiceID.\n    // For now, we'll just remove it from the frontend.\n    // A better implementation would be to fetch the ProposalServiceID when adding the service.\n    setProposalServices(proposalServices.filter(s => s.ServiceID !== serviceToRemove.ServiceID));\n  }\n\n  useEffect(() => {\n    if (proposalId) {\n      // Recalculate cost\n      fetch(`/api/proposals/${proposalId}/calculate-cost`)\n        .then(res => res.json())\n        .then(data => {\n          setTotalCost(data.totalCost);\n          setClientPrice(data.clientPrice);\n        });\n    }\n  }, [proposalServices, proposalId]);\n\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>DigitalView Dynamic Proposal Tool</h1>\n      </header>\n      <main>\n        <div className=\"services-container\">\n          <h2>Services</h2>\n          {services.map(service => (\n            <ServiceBlock key={service.ServiceID} service={service} onAdd={addServiceToProposal} />\n          ))}\n        </div>\n        <div className=\"proposal-container\">\n          <h2>Your Proposal</h2>\n          <ul>\n            {proposalServices.map(service => (\n              <li key={service.ServiceID}>\n                {service.Name}\n                <button onClick={() => removeServiceFromProposal(service)}>Remove</button>\n              </li>\n            ))}\n          </ul>\n          <CostVisualizer totalCost={totalCost} clientPrice={clientPrice} />\n          <ImpactVisualizer />\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}